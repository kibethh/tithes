(()=>{"use strict";const e=()=>{const e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},t=(t,s)=>{e();const n=`<div class="alert alert--${t}">${s}</div> `;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(e,5e3)},s=document.forms.login,n=document.forms.sermon,o=document.forms.gallery,r=document.forms.member,a=document.forms.news,c=document.forms.event,i=document.forms.showcase,l=document.querySelector(".logout"),d=document.querySelector(".header"),u=document.querySelector(".header__menu"),m=document.querySelector(".header__overlay"),g=document.querySelector(".scroll"),y=document.querySelector(".sermons__search--btn"),h=document.querySelectorAll(".sermons__search--filter-box__btn");let f=Array.from(document.querySelectorAll(".page-btns-container__item")),v=document.querySelector(".page-btns-container__prev"),p=document.querySelector(".page-btns-container__next");const w=document.querySelectorAll(".slider__img-container--list__item"),L=document.querySelector(".slider__btn--right"),S=document.querySelector(".slider__btn--left");let b;const _=document.querySelectorAll(".testimonials__content--slider__slide"),E=document.querySelectorAll(".testimonials__content--indicator__img");u&&u.addEventListener("click",(()=>{u.classList.toggle("open"),d.classList.toggle("open"),m.classList.toggle("open")})),g&&g.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(()=>{g&&g.classList.toggle("active",window.scrollY>200)}));for(let e=0;e<h.length;e++)h[e].addEventListener("click",(function(e){e.preventDefault();const t=e.target.dataset.filter;console.log(location.search);let s=new URLSearchParams(location.search);s.set("month",t),location.search="?"+s.toString()}));y&&y.addEventListener("click",(async function(e){e.preventDefault();const t=document.querySelector("#search_sermon").value;if(!t)return;let s=new URLSearchParams(location.search);s.set("speaker",t),location.search="?"+s.toString()}));for(let e=0;e<f.length;e++)f&&f[e].addEventListener("click",(function(e){e.preventDefault();let t=e.target.dataset.page;console.log(location.search),console.log(t);let s=new URLSearchParams(location.search);s.set("page",t),location.search="?"+s.toString()}));if(f.length>4){v.style.display="inline-block",p.style.display="inline-block";let e=f.splice(5),s=[];for(let t of e)t.style.display="none";p&&p.addEventListener("click",(n=>{if(n.preventDefault(),f.length>3&&e.length>0){let t=f.shift();t.style.display="none",s.push(t);let n=e.shift();n.style.display="inline-block",f.push(n)}else t("info","No more Pages!!")})),v&&v.addEventListener("click",(n=>{if(n.preventDefault(),s.length>0){let t=s.pop();t.style.display="inline-block",f.unshift(t);let n=f.pop();n.style.display="none",e.unshift(n)}else t("info","No more Pages!!")}))}const T=()=>{const e=document.querySelector(".current--img");e&&(e.classList.remove("current--img"),e.nextElementSibling?e.nextElementSibling.classList.add("current--img"):w[0].classList.add("current--img"),e.classList.remove("current--img"))};function j(){b=setInterval(T,5e3)}L&&L.addEventListener("click",(()=>{T(),clearInterval(b),j()})),S&&S.addEventListener("click",(()=>{(()=>{const e=document.querySelector(".current--img");e&&(e.classList.remove("current--img"),e.previousElementSibling?e.previousElementSibling.classList.add("current--img"):w[w.length-1].classList.add("current--img"),e.classList.remove("current--img"))})(),clearInterval(b),j()})),j();for(let e=0;e<E.length;e++)E[e].addEventListener("click",(function(){for(let e=0;e<E.length;e++)E[e].classList.remove("active");this.classList.add("active");const e=this.getAttribute("data-id");for(let e=0;e<_.length;e++)_[e].classList.remove("active");_[e].classList.add("active")}));s&&s.addEventListener("submit",(async function(e){e.preventDefault(),(async e=>{try{const s=await fetch("/api/v1/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(e))});if(200===s.status){const e=await s.json();return console.log(e.status),t("success","Login success"),void window.setTimeout((()=>{location.assign("/admin")}),1500)}const n=await s.json();t("error",n.message)}catch(e){t("error","Can't Login")}})(new FormData(s))})),n&&n.addEventListener("submit",(e=>{e.preventDefault(),(async e=>{try{const s=await fetch("/api/v1/sermons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(e))});if(201===s.status){const e=await s.json();return console.log(e.status),t("success","Sermon Created"),void window.setTimeout((()=>{history.go()}),1500)}const n=await s.json();t("error",n.message)}catch(e){t("error","Can't create a sermon,try later!!")}})(new FormData(n))})),o&&o.addEventListener("submit",(e=>{e.preventDefault(),(async e=>{try{const s=await fetch("/api/v1/gallery",{method:"POST",body:e});if(201===s.status){const e=await s.json();return console.log(e.status),t("success","Uploaded successfully"),void window.setTimeout((()=>{history.go()}),1500)}const n=await s.json();t("error",n.message)}catch(e){t("error","Can't upload, try again later!!")}})(new FormData(o))})),r&&r.addEventListener("submit",(e=>{e.preventDefault(),(async e=>{try{const s=await fetch("/api/v1/members",{method:"POST",body:e});if(201===s.status){const e=await s.json();return console.log(e.status),t("success","Member successfully added"),void window.setTimeout((()=>{history.go()}),1500)}const n=await s.json();t("error",n.message)}catch(e){t("error","Can't Add Member, try again later!!")}})(new FormData(r))})),a&&a.addEventListener("submit",(e=>{e.preventDefault(),(async e=>{try{const s=await fetch("/api/v1/news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(e))});if(201===s.status){const e=await s.json();return console.log(e.status),t("success","News Added"),void window.setTimeout((()=>{history.go()}),1500)}const n=await s.json();t("error",n.message)}catch(e){t("error","Can't add news,try later!!")}})(new FormData(a))})),c&&c.addEventListener("submit",(e=>{e.preventDefault(),(async e=>{try{const s=await fetch("/api/v1/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(e))});if(201===s.status){const e=await s.json();return console.log(e.status),t("success","Event Added"),void window.setTimeout((()=>{history.go()}),1500)}const n=await s.json();t("error",n.message)}catch(e){t("error","Can't add Event,try later!!")}})(new FormData(c))})),i&&i.addEventListener("submit",(e=>{e.preventDefault(),(async e=>{try{const s=await fetch("/api/v1/showcase",{method:"POST",body:e});if(201===s.status)return t("success","Changed Successfully"),void window.setTimeout((()=>{history.go()}),1500);const n=await s.json();t("error",n.message)}catch(e){t("error","Can't change showcase,try later!!")}})(new FormData(i))})),l&&l.addEventListener("click",(e=>{e.preventDefault(),(async e=>{try{const e=await fetch("/api/v1/logout",{method:"GET"});"success"===(await e.json()).status&&(t("success","Logout  success"),window.setTimeout((()=>{history.go()}),1500))}catch(e){t("error","Error Logging out!! Try again")}})()}))})();